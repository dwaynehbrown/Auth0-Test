{"ast":null,"code":"var _jsxFileName = \"/Users/dwaynebrown/Desktop/Auth0 Test/src/components/Complete.js\";\nimport React, { useState, useEffect } from 'react';\nimport logo from \"../assets/logo.svg\";\nimport { useAuth0, withAuthenticationRequired, getAccessTokenSilently } from \"@auth0/auth0-react\";\nimport { render } from \"react-dom\";\nimport Loading from \"./Loading\";\nimport Button from \"reactstrap/lib/Button\";\nimport axios from 'axios';\n\nconst Order = () => {\n  const {\n    user,\n    getAccessTokenSilently,\n    isAuthenticated,\n    loginWithRedirect,\n    logout\n  } = useAuth0();\n\n  const onTriggerVerifyEmail = () => {};\n\n  useEffect(() => {\n    (async () => {\n      const token = await getAccessTokenSilently({\n        audience: 'pizza-42-express',\n        scope: 'order:order'\n      });\n      axios.post('http://localhost:3002/api/order', {}, {\n        // axios.post('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/order', {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(resp => {\n        console.log('order ', resp);\n        console.log('user ', user);\n        console.log('history', !!user.user_metadata && typeof user.user_metadata.order_history !== 'undefined' ? user.user_metadata.order_history : []);\n\n        (async () => {\n          const token = await getAccessTokenSilently({\n            audience: 'pizza-42-express',\n            scope: 'update:account'\n          });\n          axios.post('http://localhost:3002/api/updateUser', {\n            // axios.post('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/updateUser', {\n            order_history: [...(!!user.user_metadata && typeof user.user_metadata.order_history !== 'undefined' ? user.user_metadata.order_history : []), { ...resp.data.order\n            }]\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        })();\n      });\n    })();\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Thanks for your order\"), user.email_verified && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h6\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, \"1. You have already verified your email address\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h6\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"2. Order Details\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Your order is on it's way\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, JSON.stringify(user, null, 2)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"1 x Summer Yummy Tummy Tickler\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"Honestly, the bestpizza you've never had.\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default withAuthenticationRequired(Order, {\n  onRedirecting: () => /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 26\n    }\n  })\n});","map":{"version":3,"sources":["/Users/dwaynebrown/Desktop/Auth0 Test/src/components/Complete.js"],"names":["React","useState","useEffect","useAuth0","withAuthenticationRequired","getAccessTokenSilently","render","Loading","Button","axios","Order","user","isAuthenticated","loginWithRedirect","logout","onTriggerVerifyEmail","token","audience","scope","post","headers","Authorization","then","resp","console","log","user_metadata","order_history","data","order","email_verified","color","JSON","stringify","onRedirecting"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport logo from \"../assets/logo.svg\";\n\nimport { useAuth0, withAuthenticationRequired, getAccessTokenSilently } from \"@auth0/auth0-react\";\nimport { render } from \"react-dom\";\nimport Loading from \"./Loading\";\nimport Button from \"reactstrap/lib/Button\";\nimport axios from 'axios';\n\nconst Order = () => {\n    const {\n        user,\n        getAccessTokenSilently,\n        isAuthenticated,\n        loginWithRedirect,\n        logout\n    } = useAuth0();\n\n    const onTriggerVerifyEmail = () => {\n\n    }\n\n    useEffect(() => {\n        (async () => {\n\n\n            const token = await getAccessTokenSilently({\n                audience: 'pizza-42-express',\n                scope: 'order:order'\n            });\n\n\n            axios.post('http://localhost:3002/api/order', {}, {\n                // axios.post('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/order', {}, {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            } )\n                .then(resp => {\n                    console.log('order ', resp);\n                    console.log('user ', user);\n\n                    console.log (\n                        'history', \n                        ((!!user.user_metadata && typeof user.user_metadata.order_history !== 'undefined') ? user.user_metadata.order_history : [])\n                    );\n\n                    (async () => {\n                        const token = await getAccessTokenSilently({\n                            audience: 'pizza-42-express',\n                            scope: 'update:account',\n                            \n                        });\n\n                        axios.post('http://localhost:3002/api/updateUser', {\n                            // axios.post('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/updateUser', {\n\n                                order_history: [\n                                    ...((!!user.user_metadata && typeof user.user_metadata.order_history !== 'undefined') ? user.user_metadata.order_history : []),\n                                    { ...resp.data.order }\n                                ]\n                            \n                        }, {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                            }\n                        })\n                    })()\n\n                })\n        })()\n\n    })\n\n\n\n       \n\n    return (\n        <>\n\n\n\n            <h1>Thanks for your order</h1>\n\n            {user.email_verified && <>\n                <h6 style={{ color: 'green' }}>1. You have already verified your email address</h6>\n                <br />\n\n                <h6 style={{ color: 'green' }}>2. Order Details</h6>\n\n                <br />\n                <br />\n\n                <h2>Your order is on it's way</h2>\n\n                <span>{JSON.stringify(user, null, 2)}</span>\n\n                <br />\n                <br />\n\n                <h4>1 x Summer Yummy Tummy Tickler</h4>\n                <p>Honestly, the bestpizza you've never had.</p>\n\n                <br />\n\n\n\n            </>}\n\n\n        </>\n    )\n};\n\nexport default withAuthenticationRequired(Order, {\n    onRedirecting: () => <Loading />,\n});\n"]},"metadata":{},"sourceType":"module"}