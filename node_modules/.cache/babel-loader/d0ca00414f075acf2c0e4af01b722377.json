{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dwaynebrown/Desktop/Auth0 Test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/dwaynebrown/Desktop/Auth0 Test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/dwaynebrown/Desktop/Auth0 Test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from'react';import logo from\"../assets/logo.svg\";import{useAuth0,withAuthenticationRequired,getAccessTokenSilently}from\"@auth0/auth0-react\";import{render}from\"react-dom\";import Loading from\"./Loading\";import Button from\"reactstrap/lib/Button\";import axios from'axios';var Order=function Order(){var _useAuth=useAuth0(),user=_useAuth.user,getAccessTokenSilently=_useAuth.getAccessTokenSilently,isAuthenticated=_useAuth.isAuthenticated,loginWithRedirect=_useAuth.loginWithRedirect,logout=_useAuth.logout;var onTriggerVerifyEmail=function onTriggerVerifyEmail(){};useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAccessTokenSilently({audience:'pizza-42-express',scope:'order:order'});case 2:token=_context2.sent;axios.get('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/order',{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(resp){console.log('order ',resp);_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAccessTokenSilently({audience:'pizza-42-express',scope:'update:account'});case 2:token=_context.sent;axios.post('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/updateUser',{user_metadata:{order_history:[_objectSpread({},resp.data.order)]}},{headers:{Authorization:\"Bearer \".concat(token)}});case 4:case\"end\":return _context.stop();}}},_callee);}))();});case 4:case\"end\":return _context2.stop();}}},_callee2);}))();});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Thanks for your order\"),user.email_verified&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h6\",{style:{color:'green'}},\"1. You have already verified your email address\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h6\",{style:{color:'green'}},\"2. Order Details\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h2\",null,\"Your order is on it's way\"),/*#__PURE__*/React.createElement(\"span\",null,JSON.stringify(user,null,2)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"1 x Summer Yummy Tummy Tickler\"),/*#__PURE__*/React.createElement(\"p\",null,\"Honestly, the bestpizza you've never had.\"),/*#__PURE__*/React.createElement(\"br\",null)));};export default withAuthenticationRequired(Order,{onRedirecting:function onRedirecting(){return/*#__PURE__*/React.createElement(Loading,null);}});","map":{"version":3,"sources":["/Users/dwaynebrown/Desktop/Auth0 Test/src/components/Complete.js"],"names":["React","useState","useEffect","useAuth0","withAuthenticationRequired","getAccessTokenSilently","render","Loading","Button","axios","Order","user","isAuthenticated","loginWithRedirect","logout","onTriggerVerifyEmail","audience","scope","token","get","headers","Authorization","then","resp","console","log","post","user_metadata","order_history","data","order","email_verified","color","JSON","stringify","onRedirecting"],"mappings":"gdAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,qCAIA,OAASC,QAAT,CAAmBC,0BAAnB,CAA+CC,sBAA/C,KAA6E,oBAA7E,CACA,OAASC,MAAT,KAAuB,WAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,uBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,cAOZP,QAAQ,EAPI,CAEZQ,IAFY,UAEZA,IAFY,CAGZN,sBAHY,UAGZA,sBAHY,CAIZO,eAJY,UAIZA,eAJY,CAKZC,iBALY,UAKZA,iBALY,CAMZC,MANY,UAMZA,MANY,CAShB,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CAElC,CAFD,CAIAb,SAAS,CAAC,UAAM,CACZ,wDAAC,yKAGuBG,CAAAA,sBAAsB,CAAC,CACvCW,QAAQ,CAAE,kBAD6B,CAEvCC,KAAK,CAAE,aAFgC,CAAD,CAH7C,QAGSC,KAHT,gBASGT,KAAK,CAACU,GAAN,CAAU,6DAAV,CAAyE,CACrEC,OAAO,CAAE,CACLC,aAAa,kBAAYH,KAAZ,CADR,CAD4D,CAAzE,EAKKI,IALL,CAKU,SAAAC,IAAI,CAAI,CACVC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,IAAtB,EAEA,wDAAC,mKACuBlB,CAAAA,sBAAsB,CAAC,CACvCW,QAAQ,CAAE,kBAD6B,CAEvCC,KAAK,CAAE,gBAFgC,CAAD,CAD7C,QACSC,KADT,eAOGT,KAAK,CAACiB,IAAN,CAAW,kEAAX,CAA+E,CAC3EC,aAAa,CAAE,CAEXC,aAAa,CAAE,kBAENL,IAAI,CAACM,IAAL,CAAUC,KAFJ,EAFJ,CAD4D,CAA/E,CAQG,CACCV,OAAO,CAAE,CACLC,aAAa,kBAAYH,KAAZ,CADR,CADV,CARH,EAPH,sDAAD,KAsBH,CA9BL,EATH,wDAAD,KA0CH,CA3CQ,CAAT,CAiDA,mBACI,qDAII,sDAJJ,CAMKP,IAAI,CAACoB,cAAL,eAAuB,qDACpB,0BAAI,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAX,oDADoB,cAEpB,8BAFoB,cAIpB,0BAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,OAAT,CAAX,qBAJoB,cAMpB,8BANoB,cAOpB,8BAPoB,cASpB,0DAToB,cAWpB,gCAAOC,IAAI,CAACC,SAAL,CAAevB,IAAf,CAAqB,IAArB,CAA2B,CAA3B,CAAP,CAXoB,cAapB,8BAboB,cAcpB,8BAdoB,cAgBpB,+DAhBoB,cAiBpB,yEAjBoB,cAmBpB,8BAnBoB,CAN5B,CADJ,CAmCH,CAjGD,CAmGA,cAAeP,CAAAA,0BAA0B,CAACM,KAAD,CAAQ,CAC7CyB,aAAa,CAAE,4CAAM,oBAAC,OAAD,MAAN,EAD8B,CAAR,CAAzC","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport logo from \"../assets/logo.svg\";\n\nimport { useAuth0, withAuthenticationRequired, getAccessTokenSilently } from \"@auth0/auth0-react\";\nimport { render } from \"react-dom\";\nimport Loading from \"./Loading\";\nimport Button from \"reactstrap/lib/Button\";\nimport axios from 'axios';\n\nconst Order = () => {\n    const {\n        user,\n        getAccessTokenSilently,\n        isAuthenticated,\n        loginWithRedirect,\n        logout\n    } = useAuth0();\n\n    const onTriggerVerifyEmail = () => {\n\n    }\n\n    useEffect(() => {\n        (async () => {\n\n\n            const token = await getAccessTokenSilently({\n                audience: 'pizza-42-express',\n                scope: 'order:order'\n            });\n\n\n            axios.get('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/order', {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n                .then(resp => {\n                    console.log('order ', resp);\n\n                    (async () => {\n                        const token = await getAccessTokenSilently({\n                            audience: 'pizza-42-express',\n                            scope: 'update:account',\n                            \n                        });\n\n                        axios.post('https://auth0-pizza42-api-dwaynehbrown.vercel.app/api/updateUser', {\n                            user_metadata: {\n\n                                order_history: [\n\n                                    { ...resp.data.order }\n                                ]\n                            }\n                        }, {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                            }\n                        })\n                    })()\n\n                })\n        })()\n\n    })\n\n\n\n       \n\n    return (\n        <>\n\n\n\n            <h1>Thanks for your order</h1>\n\n            {user.email_verified && <>\n                <h6 style={{ color: 'green' }}>1. You have already verified your email address</h6>\n                <br />\n\n                <h6 style={{ color: 'green' }}>2. Order Details</h6>\n\n                <br />\n                <br />\n\n                <h2>Your order is on it's way</h2>\n\n                <span>{JSON.stringify(user, null, 2)}</span>\n\n                <br />\n                <br />\n\n                <h4>1 x Summer Yummy Tummy Tickler</h4>\n                <p>Honestly, the bestpizza you've never had.</p>\n\n                <br />\n\n\n\n            </>}\n\n\n        </>\n    )\n};\n\nexport default withAuthenticationRequired(Order, {\n    onRedirecting: () => <Loading />,\n});\n"]},"metadata":{},"sourceType":"module"}